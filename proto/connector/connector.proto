syntax = "proto3";

package connector;

service LnctlConnector {
  rpc GetStatus(GetStatusRequest) returns (GetStatusResponse) {}
  rpc StreamNodeEvents(StreamNodeEventsRequest) returns (stream NodeEvent) {}
}

message GetStatusRequest {}
message GetStatusResponse {
  string connector_id = 1;
  string node_pubkey = 2;
  ConnectorType type = 3;
}
enum ConnectorType {
  LND = 0;
}

message StreamNodeEventsRequest { }
message NodeEvent {
  string connector_id = 1;
  string monitored_node_id = 2;

  oneof event {
    LnGossip gossip = 3;
  }
}
message LnGossip {
  oneof message {
    NodeAnnouncement node_announcement = 1;
  }
}
message NodeAnnouncement {
  string node_id = 1;
}
